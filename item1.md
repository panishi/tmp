---
marp: true
transition: "slide"
slideNumber: true
---
<!-- theme: gaia -->
<!-- size: 16:9 -->
<!-- page_number: true -->
<!-- paginate: true -->

<style>
img[alt~="center"] {
  display: block;
  margin: 0 auto;
}
</style>

# Effective C++
Item 1: C++を複数の言語の連合と見なそう

2021/7/21

---
### はじめに
- もともとC++は，Cにオブジェクト指向的な特徴を付け加えたもので，「クラス付きC (C with Classes)」と呼ばれていた．
- 現在のC++は，マルチパラダイムなプログラミング言語となっている (手続き指向プログラミング，オブジェクト指向プログラミング，ファンクショナルプログラミング，ジェネリックプログラミング，メタプログラミング etc.)．

---
### C++の基本的な4つのサブセット
- C++の能力と柔軟性は，同時に混乱を招いていることも否定できない．
- このような事態に対処するためには，C++を単一の言語ではなく，関連する複数の言語の連合と考えるのが良い．
- そのためにはC++の基本的なサブセットを理解する必要があるが，幸いなことにそれは4つだけ．

---
#### C
- C++の基本的な機能は，全てCから来ている．
- 多くの場合，C++はCより良い方法を提供する (Item 2やItem 13を参照)．
- 「C++のCの部分」を扱っているときには，「効率的なプログラミングのためのルール」は，Cが扱える範囲を反映したものになる．

---
#### オブジェクト指向C++
- クラス，カプセル化，継承，ポリモーフィズム，仮想関数等，C++における「クラス付きC」の部分．
- オブジェクト指向デザインのための古典的なルールがほぼそのまま当てはまる．

---
#### テンプレートC++
- C++のジェネリックプログラミング部分．
- テンプレートの考え方はC++全体に行き渡っている．
- テンプレートメタプログラミング (TMP) という，全く新しいパラダイムも生まれている (Item 48を参照)．

---
#### STL
- STL (Standard Template Library) はテンプレートライブラリの一種だが，非常に特別なもの．
- コンテナ，反復子 (イテレータ)，アルゴリズム，関数オブジェクト等，ライブラリ内の要素は美しく組み合わさっている．
- 「テンプレートを扱うルール」と「ライブラリを扱うルール」は別物と考えるべきで，STLを使う際にはそのコンベンションに従う必要がある．

---
### サブセットを乗り換える際の戦略
- Cの組み込み型は一般に参照渡しよりも値渡しの方が効率が良いが，ユーザ定義型については通常 `const` 参照渡しの方が効率的．
- テンプレートC++では，扱っているオブジェクトの型が事前には不明なため，この傾向は更に強まる．
- しかしSTLでは，反復子と関数オブジェクトはCのポインタを模したものになっており，これらは値渡しされる (Item 20を参照)．

---
### おわりに
- C++は，単一のルールを持った1つの言語というより，それぞれ独自のコンベンションを持つ4つの「サブセット言語」の連合と考えた方が良い．
- これを意識しておけば，C++の理解はずっとやさしくなる…はず．

---
### Things to Remember
- C++で効率良くプログラミングするためのルールは，C++のどの部分を使うかで変わってくる．
